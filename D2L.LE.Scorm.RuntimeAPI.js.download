D2L.LE.SCORM={};D2L.LE.SCORM.Init=function(activityId,isSequenced){if(window.API){window.API.Init(activityId);}if(window.API_1484_11){window.API_1484_11.Init(activityId,isSequenced);}};API=function(){this.LastError='0';this.IsInitialized=false;this.IsTerminated=false;this.ActivityId=-1;this.ErrorMessages={'0':'No error','101':'General Exception','201':'Invalid Argument Error','202':'Element Cannot Have Children','203':'Element Not An Array, Cannot Have Count','301':'Not Initialized','351':'General Set Failure','391':'General Commit Failure','401':'Not Implemented Error','402':'Invalid SetValue, Element is a Keyword','403':'Element Is Read Only','404':'Element is Write Only','405':'Incorrect Data Type'};this.Cache=new Map();};API.prototype.Init=function(activityId){this.LastError='0';this.IsInitialized=false;this.IsTerminated=false;this.ActivityId=activityId;};API.prototype.LMSInitialize=function(param){this.LastError='0';if(param!=''){this.LastError='201';return'false';}if(this.IsInitialized){this.LastError='101';return'false';}else if(this.IsTerminated){this.LastError='101';return'false';}else{var result=D2L.LP.Web.UI.Rpc.ConnectObjectSynchronous(D2L.LP.Web.UI.Rpc.Verbs.POST,new D2L.LP.Web.Http.UrlLocation('/d2l/le/scorm/runtimeAPI/PerformInitialize'),{activityId:this.ActivityId,isScorm2004:false});if(result===undefined){this.LastError='101';return'false';}else if(result.ReturnValue=='true'){this.IsTerminated=false;this.IsInitialized=true;return'true';}else{this.LastError=result.ErrorCode.toString();return'false';}}};API.prototype.LMSFinish=function(param){this.LastError='0';if(param!=''){this.LastError='201';return false;}if(!this.IsInitialized){this.LastError='301';return'false';}else if(this.IsTerminated){this.LastError='101';return'false';}else{var result;try{result=D2L.LP.Web.UI.Rpc.ConnectObjectSynchronous(D2L.LP.Web.UI.Rpc.Verbs.POST,new D2L.LP.Web.Http.UrlLocation('/d2l/le/scorm/runtimeAPI/PerformTerminate'),{activityId:this.ActivityId,isScorm2004:false});}catch(err){console.log(err.message);D2L.LP.Web.UI.Rpc.SendBeacon(new D2L.LP.Web.Http.UrlLocation('/d2l/le/scorm/runtimeAPI/PerformTerminate'),{activityId:this.ActivityId,isScorm2004:false});result={ReturnValue:'true'};}if(result===undefined){this.LastError='101';return'false';}else if(result.ReturnValue=='true'){this.IsTerminated=true;this.IsInitialized=false;return'true';}else{this.LastError=result.ErrorCode.toString();return'false';}}};API.prototype.LMSGetValue=function(param){this.LastError='0';if(param==''){this.LastError='201';return'';}if(!this.IsInitialized){this.LastError='301';return'';}else if(this.IsTerminated){this.LastError='101';return'';}else if(this.Cache.has(param)&&param.toLowerCase().indexOf('_count')===-1){return this.Cache.get(param);}else{var result=D2L.LP.Web.UI.Rpc.ConnectObjectSynchronous(D2L.LP.Web.UI.Rpc.Verbs.POST,new D2L.LP.Web.Http.UrlLocation('/d2l/le/scorm/runtimeAPI/PerformGetValue'),{activityId:this.ActivityId,isScorm2004:false,element:param});if(result===undefined){this.LastError='101';return'';}else if(result.ErrorCode.toString()=='0'){if(result.ReturnValue==null){this.Cache.set(param,'');return'';}else{this.Cache.set(param,result.ReturnValue);return result.ReturnValue;}}else{this.LastError=result.ErrorCode.toString();return'';}}};API.prototype.LMSSetValue=function(param,value){this.LastError='0';if(param==''){this.LastError='201';return'false';}if(!this.IsInitialized){this.LastError='301';return'false';}else if(this.IsTerminated){this.LastError='101';return'false';}else{var result;try{result=D2L.LP.Web.UI.Rpc.ConnectObjectSynchronous(D2L.LP.Web.UI.Rpc.Verbs.POST,new D2L.LP.Web.Http.UrlLocation('/d2l/le/scorm/runtimeAPI/PerformSetValue'),{activityId:this.ActivityId,isScorm2004:false,element:param,value:value});}catch(err){console.log(err.message);D2L.LP.Web.UI.Rpc.SendBeacon(new D2L.LP.Web.Http.UrlLocation('/d2l/le/scorm/runtimeAPI/PerformSetValue'),{activityId:this.ActivityId,isScorm2004:false,element:param,value:value});this.Cache.set(param,value);result={ReturnValue:'true'};}if(result===undefined){this.LastError='101';return'false';}else if(result.ReturnValue=='true'){this.Cache.set(param,value);return'true';}else{this.LastError=result.ErrorCode.toString();return'false';}}};API.prototype.LMSCommit=function(param){this.LastError='0';if(param!=''){this.LastError='201';return'false';}if(!this.IsInitialized){this.LastError='301';return'false';}else if(this.IsTerminated){this.LastError='101';return'false';}else{return'true';}};API.prototype.LMSGetLastError=function(){return this.LastError;};API.prototype.LMSGetErrorString=function(errorCode){var ret=this.ErrorMessages[errorCode];if(ret==undefined)ret='';return ret;};API.prototype.LMSGetDiagnostic=function(errorCode){var ret=this.ErrorMessages[errorCode];if(ret==undefined)ret='';return ret;};window.API=new API();API_1484_11=function(){this.LastError='0';this.IsInitialized=false;this.IsTerminated=false;this.IsTerminatedByLMS=false;this.ActivityId=-1;this.IsSequenced=false;this.NavRequest='_none_';this.version='1.0';this.ErrorMessages={'0':'No error','101':'General Exception','102':'General Initialization Failure','103':'Already Initialized','104':'Content Instance Terminated','111':'General Termination Failure','112':'Termination Before Initialization','113':'Termination After Termination','122':'Retrieve Data Before Initialization','123':'Retrieve Data After Termination','132':'Store Data Before Initialization','133':'Store Data After Termination','142':'Commit Before Initialization','143':'Commit After Termination','201':'General Argument Error','301':'General Get Failure','351':'General Set Failure','391':'General Commit Failure','401':'Undefined Data Model Element','402':'Unimplemented Data Model Element','403':'Data Model Element Value Not Initialized','404':'Data Model Element Is Read Only','405':'Data Model Element Is Write Only','406':'Data Model Element Type Mismatch','407':'Data Model Value Out Of Range','408':'Data Model Dependancy Not Established'};this.Cache=new Map();};API_1484_11.prototype.Init=function(activityId,isSequenced){this.LastError='0';this.NavRequest='_none_';this.IsInitialized=false;this.IsTerminated=false;this.IsTerminatedByLMS=false;this.ActivityId=activityId;this.IsSequenced=isSequenced;};API_1484_11.prototype.Initialize=function(param){this.LastError='0';this.NavRequest='none';if(param!=''){this.LastError='201';return'false';}if(this.IsInitialized){this.LastError='103';return'false';}else if(this.IsTerminated){this.LastError='104';return'false';}else{var result=D2L.LP.Web.UI.Rpc.ConnectObjectSynchronous(D2L.LP.Web.UI.Rpc.Verbs.POST,new D2L.LP.Web.Http.UrlLocation('/d2l/le/scorm/runtimeAPI/PerformInitialize'),{activityId:this.ActivityId,isScorm2004:true});if(result===undefined){this.LastError='101';return'false';}else if(result.ReturnValue=='true'){this.IsTerminated=false;this.IsInitialized=true;return'true';}else{this.LastError=result.ErrorCode.toString();return'false';}}};API_1484_11.prototype.Terminate=function(param){this.LastError='0';if(param!=''){this.LastError='201';return'false';}if(!this.IsInitialized){this.LastError='112';return'false';}else if(this.IsTerminated){if(this.IsTerminatedByLMS){return'true';}else{this.LastError='113';return'false';}}else{if(this.NavRequest=='retry'){this.SetValue('cmi.exit','normal');}var result;try{result=D2L.LP.Web.UI.Rpc.ConnectObjectSynchronous(D2L.LP.Web.UI.Rpc.Verbs.POST,new D2L.LP.Web.Http.UrlLocation('/d2l/le/scorm/runtimeAPI/PerformTerminate'),{activityId:this.ActivityId,isScorm2004:true});}catch(err){console.log(err.message);D2L.LP.Web.UI.Rpc.SendBeacon(new D2L.LP.Web.Http.UrlLocation('/d2l/le/scorm/runtimeAPI/PerformTerminate'),{activityId:this.ActivityId,isScorm2004:true});result={ReturnValue:'true'};}if(result===undefined){this.LastError='101';return'false';}else if(result.ReturnValue=='true'){this.IsTerminated=true;this.IsInitialized=false;return'true';}else{this.LastError=result.ErrorCode.toString();return'false';}}};API_1484_11.prototype.TerminateFromLMS=function(objectId){this.LastError='0';if(!this.IsInitialized){this.LastError='112';}else{this.IsTerminated=true;this.IsTerminatedByLMS=true;this.IsInitialized=false;}};API_1484_11.prototype.GetValue=function(param){this.LastError='0';if(param==''){this.LastError='301';return'';}if(!this.IsInitialized){this.LastError='122';return'';}else if(this.IsTerminated){this.LastError='123';return'';}else if(this.Cache.has(param)&&param.toLowerCase().indexOf('_count')===-1){return this.Cache.get(param);}else{var re=new RegExp('^adl.nav.request_valid.choice.\{target=[A-Z0-9a-z_]+\}$');if(param=='adl.nav.request'){return this.NavRequest;}else if(param=='adl.nav.request_valid.continue'||param=='adl.nav.request_valid.previous'||re.test(param)){return'unknown';}else{var result=D2L.LP.Web.UI.Rpc.ConnectObjectSynchronous(D2L.LP.Web.UI.Rpc.Verbs.POST,new D2L.LP.Web.Http.UrlLocation('/d2l/le/scorm/runtimeAPI/PerformGetValue'),{activityId:this.ActivityId,isScorm2004:true,element:param});if(result===undefined){this.LastError='101';return'';}else if(result.ErrorCode.toString()=='0'){if(result.ReturnValue==null){this.Cache.set(param,'');return'';}else{this.Cache.set(param,result.ReturnValue);return result.ReturnValue;}}else{this.LastError=result.ErrorCode.toString();return'';}}}};API_1484_11.prototype.SetValue=function(param,value){this.LastError='0';if(param==''){this.LastError='351';return'false';}if(!this.IsInitialized){this.LastError='132';return'false';}else if(this.IsTerminated){this.LastError='133';return'false';}else{if(param=='adl.nav.request'){if(this.SetNavRequest(value)){return'true';}else{return'false';}}else{var result;try{result=D2L.LP.Web.UI.Rpc.ConnectObjectSynchronous(D2L.LP.Web.UI.Rpc.Verbs.POST,new D2L.LP.Web.Http.UrlLocation('/d2l/le/scorm/runtimeAPI/PerformSetValue'),{activityId:this.ActivityId,isScorm2004:true,element:param,value:value});}catch(err){console.log(err.message);D2L.LP.Web.UI.Rpc.SendBeacon(new D2L.LP.Web.Http.UrlLocation('/d2l/le/scorm/runtimeAPI/PerformSetValue'),{activityId:this.ActivityId,isScorm2004:true,element:param,value:value});this.Cache.set(param,value);result={ReturnValue:'true'};}if(result===undefined){this.LastError='101';return'false';}else if(result.ReturnValue=='true'){this.Cache.set(param,value);return'true';}else{this.LastError=result.ErrorCode.toString();return'false';}}}};API_1484_11.prototype.Commit=function(param){this.LastError='0';if(param!=''){this.LastError='201';return'false';}if(!this.IsInitialized){this.LastError='142';return'false';}else if(this.IsTerminated){this.LastError='143';return'false';}else{return'true';}};API_1484_11.prototype.GetLastError=function(){return this.LastError;};API_1484_11.prototype.GetErrorString=function(errorCode){var ret=this.ErrorMessages[errorCode];if(ret==undefined)ret='';return ret;};API_1484_11.prototype.GetDiagnostic=function(errorCode){var ret=this.ErrorMessages[errorCode];if(ret==undefined)ret='';return ret;};API_1484_11.prototype.DoNavRequest=function(){this.LastError='0';};API_1484_11.prototype.SetLmsNavRequest=function(request){this.LastError='0';var ret=false;if(request=='start'||request=='resumeAll'||request=='continue'||request=='previous'||request=='exit'||request=='exitAll'||request=='abandon'||request=='abandonAll'||request=='suspendAll'||request=='_none_'||request=='retry'||request=='retryAll'){ret=true;}var re=new RegExp('^\{target=[A-Z0-9a-z_]+\}choice$');if(re.test(request)){ret=true;}if(ret){this.NavRequest=request;}else{this.LastError='406';}return ret;};API_1484_11.prototype.SetNavRequest=function(request){this.LastError='0';var ret=false;if(request=='continue'||request=='previous'||request=='exit'||request=='exitAll'||request=='abandon'||request=='abandonAll'||request=='suspendAll'||request=='_none_'){ret=true;}var re=new RegExp('\{target=[A-Z0-9a-z_\.\-]+\}choice');if(re.test(request)){ret=true;}if(ret){this.NavRequest=request;}else{this.LastError='406';}return ret;};window.API_1484_11=new API_1484_11();